<% const currentPage = 'new-maintenance'; const pageTitle = 'Segnala Problema'; %>

<div class="card" style="max-width: 800px; margin: 0 auto;">
  <div class="card-header">
    <h2 class="card-title">Segnala un Problema al Veicolo</h2>
    <p class="card-subtitle">Descrivi il problema riscontrato</p>
  </div>

  <div class="mb-4" style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px;">
    <h3 class="font-bold mb-2">Veicolo Assegnato Oggi</h3>
    <div><strong>Targa:</strong> <%= assignment.targa %></div>
    <div><strong>Modello:</strong> <%= assignment.modello %></div>
  </div>

  <form action="/rider/maintenance/new" method="POST">

    <div class="form-group">
      <label class="form-label">Descrizione Problema *</label>
      <textarea name="descrizione" class="form-textarea" rows="6" required placeholder="Descrivi il problema riscontrato in dettaglio..."></textarea>
      <p class="form-help">Sii il più dettagliato possibile. Il sistema rileverà automaticamente la priorità.</p>
    </div>

    <div class="form-group">
      <label class="form-label">Priorità (opzionale)</label>
      <select name="priorita" class="form-select">
        <option value="">Lascia decidere al sistema</option>
        <option value="bassa">Bassa</option>
        <option value="media">Media</option>
        <option value="alta">Alta</option>
        <option value="critica">Critica</option>
      </select>
    </div>

    <div class="flex gap-2">
      <button type="submit" class="btn btn-primary">
        <i class="fas fa-paper-plane"></i> Invia Segnalazione
      </button>
      <a href="/rider/dashboard" class="btn btn-outline">
        <i class="fas fa-times"></i> Annulla
      </a>
    </div>
  </form>
</div>
